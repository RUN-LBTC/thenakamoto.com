<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="icon" href="/assets/images/logo.png">

<title>Sharding II | The Nakamoto</title>

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Sharding II | The Nakamoto</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Sharding II" />
<meta name="author" content="tiaan" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="We look at the Ethereum blockchain, sharding, and how sharding will allow blockchains to scale." />
<meta property="og:description" content="We look at the Ethereum blockchain, sharding, and how sharding will allow blockchains to scale." />
<link rel="canonical" href="http://localhost:4000/Sharding-II/" />
<meta property="og:url" content="http://localhost:4000/Sharding-II/" />
<meta property="og:site_name" content="The Nakamoto" />
<meta property="og:image" content="http://localhost:4000/assets/images/ShardingII.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-20T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="http://localhost:4000/assets/images/ShardingII.png" />
<meta property="twitter:title" content="Sharding II" />
<meta name="twitter:site" content="@TheNakamotoCom" />
<meta name="twitter:creator" content="@tiaan" />
<script type="application/ld+json">
{"image":"http://localhost:4000/assets/images/ShardingII.png","url":"http://localhost:4000/Sharding-II/","headline":"Sharding II","dateModified":"2020-05-20T00:00:00+02:00","datePublished":"2020-05-20T00:00:00+02:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/logo.png"},"name":"tiaan"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/Sharding-II/"},"author":{"@type":"Person","name":"tiaan"},"description":"We look at the Ethereum blockchain, sharding, and how sharding will allow blockchains to scale.","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
<link href="/assets/css/screen.css" rel="stylesheet">

<link href="/assets/css/main.css" rel="stylesheet">

<script src="/assets/js/jquery.min.js"></script>

</head>




<body class="layout-post">
	<!-- defer loading of font and font awesome -->
	<noscript id="deferred-styles">
        <link href="https://fonts.googleapis.com/css2?family=Archivo&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	</noscript>


<!-- Begin Menu Navigation
================================================== -->
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">

    <div class="container pr-0">

    <!-- Begin Logo -->
    <a class="navbar-brand" href="/">
    <img src="/assets/images/logo.png" alt="The Nakamoto">
    </a>
    <!-- End Logo -->

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarMediumish">

        <!-- Begin Menu -->

            <ul class="navbar-nav ml-auto">

                
                <li class="nav-item">
                
                <a class="nav-link" href="/index.html">Home</a>
                </li>

                <li class="nav-item">
                <a class="nav-link" href="/about">About</a>
                </li>

                <li class="nav-item">
                <a target="_blank" class="nav-link" href="https://twitter.com/TheNakamotoCom"><i class="fab fa-twitter"></i></a>
                </li>

                <li class="nav-item">
                <a target="_blank" class="nav-link" href="https://github.com/The-Nakamoto/Articles"><i class="fab fa-github"></i> Contribute</a>
                </li>

                <script src="/assets/js/lunr.js"></script>


<style>
    .lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}
</style>


<form class="bd-search" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
    <input style="text-align: left; padding-left: 30px;" type="text" class="form-control text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Search"/>
</form>

<div id="lunrsearchresults">
    <ul></ul>
</div>

<script src="/assets/js/lunrsearchengine.js"></script>

            </ul>

        <!-- End Menu -->

    </div>

    </div>
</nav>
<!-- End Navigation
================================================== -->

<div class="site-content">

<div class="container">

<!-- Site Title
================================================== -->
<div class="mainheading">
    <h1 class="sitetitle">The Nakamoto</h1>
    <p class="lead">
        An educational portal for sound money and technology.
    </p>
</div>

<!-- Content
================================================== -->
<div class="main-content">
    <!-- Begin Article
================================================== -->
<div class="container">
    <div class="row">

        <!-- Post Share -->
        <div class="col-md-2 pl-0">
            <div class="share sticky-top sticky-top-offset">
    <p>
        Share
    </p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Looking for something interesting to read? Check out: Sharding II&url=http://localhost:4000/Sharding-II/ by @TheNakamotoCom" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=http://localhost:4000/Sharding-II/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/Sharding-II/" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>

    </ul>
    
    <div class="sep">
    </div>
    <ul>
        <li>
        <a class="small smoothscroll" href="#disqus_thread"></a>
        </li>
    </ul>
    
</div>

        </div>

        <!-- Post -->
        

        <div class="col-md-9 flex-first flex-md-unordered">
            <div class="mainheading">

                <!-- Author Box -->
                
                <div class="row post-top-meta">
                    <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0">
                        
                        <img class="author-thumb" src="https://www.gravatar.com/avatar/1d4073f730790f1b0da3577939c2e02f?s=250&d=mm&r=x" alt="Tiaan Wolmarans">
                        
                    </div>
                    <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left">
                        <a target="_blank" class="link-dark" href="https://www.imtiaan.com">Tiaan Wolmarans</a><a target="_blank" href="https://twitter.com/ImTiaan" class="btn follow">Follow</a>
                        <span class="author-description">Founder of The Nakamoto, head of product at revix.com and Cofounder of xxi.finance.</span>
                    </div>
                </div>
                

                <!-- Post Title -->
                <h1 class="posttitle">Sharding II</h1>

            </div>

            <!-- Adsense if enabled from _config.yml (change your pub id and slot) -->
            
            <!-- End Adsense -->

            <!-- Post Featured Image -->
            

            
            <img class="featured-image img-fluid" src="/assets/images/ShardingII.png" alt="Sharding II">
            

            
            <!-- End Featured Image -->

            <!-- Post Content -->
            <div style="font-family: Roboto;" class="article-post">
                <!-- Toc if any -->
                
                <!-- End Toc -->
                <p><em>In our last update, we discussed what sharding is, the problems it aims to solve and some of the hurdles we need to overcome to effectively implement it. Today we’ll look at cross-shard transactions, invalid transactions, and malicious behavior.</em></p>

<p>The basic type of shard we described in our last article isn’t a very useful or practical method of sharding, because they can’t communicate with each other, which makes them as useful as one individual blockchain.</p>

<p>Let’s take the example of making a simple payment. If user A and user B were on the same shard, the validators within the shard would be able to process the transaction without issue, but what happens when they have accounts on different shards?</p>

<p>User A is on shard #1 and user B is on shard #2. The validators on the individual shards would not be able to debit or credit the users’ accounts because they would have no authority on each others’ respective shards.</p>

<p>There are however solutions to this problem, so let’s take a look at some of them in a little more detail:</p>

<h4 id="synchronous-same-time-cross-shard-transactions">Synchronous (same-time) cross-shard transactions</h4>
<p>In this case, when user A on shard #1 needs to send funds to user B on shard #2, the blocks in each shard that contains state transition that’s related to the transaction itself are produced simultaneously, and the validators on each shard work collaboratively to confirm the transaction. Vitalik Buterin proposed merge blocks with this solution back in early 2018.</p>

<h4 id="asynchronous-cross-shard-transactions">Asynchronous cross-shard transactions</h4>
<p>This is a slightly easier operation to complete, and far simpler to coordinate so it is more popular than synchronous transactions.</p>

<p>Again, we’ll use the example of user A on shard #1 wanting to send money to user B on shard #2.</p>

<p>In this scenario, the shard in charge of crediting user B’s account will only validate its part of the transaction once it has enough proof that the shard in charge of debiting user A’s account has been done.
This approach is not perfect though, there is a non-zero chance that one of the blocks of one of the shards gets orphaned. A non-zero chance, however unlikely is still a vulnerability that can’t be ignored.</p>

<p>Taking the figure below into consideration we’ll look at why:</p>

<p><img src="https://github.com/The-Nakamoto/thenakamoto.com/blob/gh-pages/assets/posts/ShardingII-1.jpg?raw=true" alt="Asynchronous Cross-Shard Transactions" title="Asynchronous Cross-Shard Transactions" /></p>

<p>This blockchain has two shards, and by pure coincidence, they both fork at the exact point that the transaction is incorporated into block A in shard #1 and block X’ in shard #2.</p>

<p>When a fork like this happens, the shard has to orphan one of the chains and accept the other. In this case, if chain A, B, etc. becomes the accepted chain in shard #1 and chain W’, X’, etc. becomes the accepted chain in shard #2, then the transaction gets finalized and everyone is happy.</p>

<p>If the A’, B’ etc. chan in shard #1 is accepted and chain W, X etc. in shard #2 is accepted, then the entire transaction fails, which is also an acceptable outcome, because the transaction can be resent.</p>

<p>What happens if chain A, B, etc. is accepted in shard #1 and chain W, X, etc. is accepted in shard #2? One part of the transaction is finalized (A, B, etc.) and the other part of the transaction is abandoned (W, X, etc.)</p>

<h4 id="is-that-it">Is that it?</h4>
<p>Now that you have a better understanding of sharding and how it works, you might be satisfied, or have more questions, there is however at least one more thing to consider: bad actors.</p>

<h4 id="malicious-nodes">Malicious nodes</h4>
<p>It’s quite common (in any scenario) that when there is the potential for a large payday, there will be people out there thinking of ways to beat the system, whatever that system might be.</p>

<h4 id="approving-invalid-blocks">Approving invalid blocks</h4>
<p>Bad actor nodes might decide that they want to attack the network by creating blocks that attempt to alter the network. Using user #1 and #2, let’s hypothesize that User #1 has 10 coins and user #2 has 0 tokens. Malicious nodes on the network could attempt to create a block when user #1 sends those 10 coins to user #2, which ends up with user #1 having 0 coins and user #2 has 1000 coins.</p>

<p><img src="https://github.com/The-Nakamoto/thenakamoto.com/blob/gh-pages/assets/posts/ShardingII-2.jpeg?raw=true" alt="Approving invalid blocks" title="Approving invalid blocks" /></p>

<p>In a regular blockchain that isn’t sharded, this type of attack is impossible, since every node validates every block, and if an invalid block is discovered, all the nodes (whether they are miners or not) reject that block.</p>

<p>With classic blockchains, it doesn’t matter how many blocks malicious nodes create, or how fast they create them, the honest actors of the network will always ignore those blocks and continue building the honest chain.</p>

<p>Consider a chain that splits into two because bad nodes want to build invalid blocks to fill their accounts with a bunch of coins. The malicious nodes might even outnumber the honest nodes as is this case. The shorter chain is the honest chain, and the longer one is invalid. In a regular non-sharded blockchain, every participant is responsible for validating all the blocks they receive and confirming the state, therefore anyone who has a vested interest in the blockchain (and by extension its integrity) would immediately recognize the invalid chain and disregard it for the (in this case) shorter chain.</p>

<p><img src="https://github.com/The-Nakamoto/thenakamoto.com/blob/gh-pages/assets/posts/ShardingII-3.jpg?raw=true" alt="Approving invalid blocks" title="Approving invalid blocks" /></p>

<p>A sharded chain is a little more complex because participants can’t validate every transaction on each shard, so we have to figure out how to confirm that there are no invalid blocks within the entire history of the shard.</p>

<p>Since the beacon chain (discussed in our last post) doesn’t normally have the capacity to validate every block in every shard, we need another solution to ensure the integrity of each chain.</p>

<p>Assuming that the network, and by association, each shard has a Byzantine Fault Tolerance mechanism, and the malicious nodes within a shard control less than 66.667% you could build a mechanism that alerts the system if there are any attempts to generate invalid blocks, wherein one or more honest nodes could attest to valid or invalid blocks. If more than 66.667% of the shard is controlled by malicious nodes, then they could theoretically finalize blocks, however as long as one node within the shard is honest, a mechanism can be built to allow honest nodes to contest malicious ones.</p>

<p><em>This post is intended for informational purposes only. The views expressed in this post are not, and should not be construed as investment advice or recommendations. This article is not an offer, nor the solicitation of an offer, to buy or sell any of the assets or securities mentioned herein. All opinions in this post are my own.</em></p>

            </div>

            <!-- Rating -->
            

            <!-- Post Date -->
            <p>
            <small>
                <span class="post-date"><time class="post-date" datetime="2020-05-20">20 May 2020</time></span>           
                
                </small>
            </p>

            <!-- Post Categories -->
            <div class="after-post-cats">
                <ul class="tags mb-4">
                    
                    
                    <li>
                        <a class="smoothscroll" href="/categories#Bitcoin">Bitcoin</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/categories#Cryptocurrency">Cryptocurrency</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/categories#Fiat">Fiat</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/categories#Fractional-Reserve-Banking">Fractional Reserve Banking</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/categories#Money">Money</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/categories#Scaling">Scaling</a>
                    </li>
                    
                </ul>
            </div>
            <!-- End Categories -->

            <!-- Post Tags -->
            <div class="after-post-tags">
                <ul class="tags">
                    
                    
                    <li>
                        <a class="smoothscroll" href="/tags#Bitcoin">#Bitcoin</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#Cryptocurrency">#Cryptocurrency</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#Fiat">#Fiat</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#Fractional-Reserve-Banking">#Fractional Reserve Banking</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#Money">#Money</a>
                    </li>
                    
                    <li>
                        <a class="smoothscroll" href="/tags#Scaling">#Scaling</a>
                    </li>
                    
                </ul>
            </div>
            <!-- End Tags -->

            <!-- Prev/Next -->
            <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
            
            <a class="prev d-block col-md-6" href="//Sharding-I/"> &laquo; Sharding I</a>
            
            
            <a class="next d-block col-md-6 text-lg-right" href="//Scaling-money-I/">Scaling Money I &raquo; </a>
            
            <div class="clearfix"></div>
            </div>
            <!-- End Categories -->

        </div>
        <!-- End Post -->

    </div>
</div>
<!-- End Article
================================================== -->

<!-- Begin Comments
================================================== -->

    <div class="container">
        <div id="comments" class="row justify-content-center mb-5">
            <div class="col-md-8">
                <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'thenakamoto-com'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

            </div>
        </div>
    </div>

<!--End Comments
================================================== -->

<!-- Review with LD-JSON, adapt it for your needs if you like, but make sure you test the generated HTML source code first: 
https://search.google.com/structured-data/testing-tool/u/0/
================================================== -->

</div>


<!-- Bottom Alert Bar
================================================== -->
<div class="alertbar">
	<div class="container text-center">
		<span><img src="/assets/images/logo.png" alt="The Nakamoto"> &nbsp; Never miss a <b>story</b> from us, subscribe to our newsletter</span>
        <form action="https://thenakamoto.us20.list-manage.com/subscribe/post?u=a62d8de4abe2b1bdef7e13c98&amp;id=af36692f4c" method="post" name="mc-embedded-subscribe-form" class="wj-contact-form validate" target="_blank" novalidate>
            <div class="mc-field-group">
            <input type="email" placeholder="Email" name="EMAIL" class="required email" id="mce-EMAIL" autocomplete="on" required>
            <input type="submit" value="Subscribe" name="subscribe" class="heart">
            </div>
        </form>
	</div>
</div>

    
</div>

<!-- Categories Jumbotron
================================================== 
<div class="jumbotron fortags">
    <div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
            <div class="d-md-flex align-items-center justify-content-center h-100">
                <h2 class="d-md-block align-self-center py-1 font-weight-light">Tags <span class="d-none d-md-inline">→</span></h2>
            </div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
            
            
                
                    <a class="mt-1 mb-1" href="/categories#Bitcoin">Bitcoin (4)</a>
                
                    <a class="mt-1 mb-1" href="/categories#Cryptocurrency">Cryptocurrency (5)</a>
                
                    <a class="mt-1 mb-1" href="/categories#Money">Money (3)</a>
                
                    <a class="mt-1 mb-1" href="/categories#Fractional-Reserve-Banking">Fractional Reserve Banking (3)</a>
                
                    <a class="mt-1 mb-1" href="/categories#Fiat">Fiat (3)</a>
                
                    <a class="mt-1 mb-1" href="/categories#UTXO">UTXO (1)</a>
                
                    <a class="mt-1 mb-1" href="/categories#Scaling">Scaling (4)</a>
                
                    <a class="mt-1 mb-1" href="/categories#Ethereum">Ethereum (1)</a>
                
            
            
		</div>
	</div>
</div> -->

<!-- Begin Footer
================================================== -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                Copyright © 2020 The Nakamoto 
            </div>
            <div class="col-md-6 col-sm-6 text-center text-lg-right">    
                <a target="_blank" href="https://www.wowthemes.net/mediumish-free-jekyll-template/">The Nakamoto</a> by <a href="https://www.xxi.finance" target="0">XXI Finance</a>
            </div>
        </div>
    </div>
</footer>
<!-- End Footer
================================================== -->

</div> <!-- /.site-content -->

<!-- Scripts
================================================== -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

<script src="/assets/js/mediumish.js"></script>



<script src="/assets/js/ie10-viewport-bug-workaround.js"></script> 


<script id="dsq-count-scr" src="//thenakamoto-com.disqus.com/count.js"></script>


</body>
</html>
